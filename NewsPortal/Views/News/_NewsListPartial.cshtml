@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer

@model IEnumerable<NewsPortal.Models.News>

@foreach (var n in Model)
{
    var translation = n.Translations.FirstOrDefault();
    if (translation == null) continue;

    <div class="card mb-4 shadow-sm">
        @if (!string.IsNullOrEmpty(n.ImagePath))
        {
            <img src="@n.ImagePath" class="card-img-top" style="max-height: 300px; object-fit: cover;" />
        }
        <div class="card-body">
            <h3 class="card-title">@translation.Title</h3>

            <p>
                <a asp-action="Details" asp-route-id="@n.Id" class="btn btn-primary">
                    @Localizer["More"]
                </a>
            </p>

            @if (User.Identity?.IsAuthenticated ?? false)
            {
                <div class="mt-2">
                    <a asp-action="Edit" asp-route-id="@n.Id" class="btn btn-sm btn-warning">
                        @Localizer["Edit"]
                    </a>

                    <a asp-action="Delete" asp-route-id="@n.Id"
                       class="btn btn-sm btn-danger"
                       onclick="return confirm('@Localizer["DeleteConfirm"]')">
                        @Localizer["Delete"]
                    </a>
                </div>
            }
        </div>
    </div>
}
